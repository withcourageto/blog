## 缓存更新策略问题


### 缓存更新的几种策略


	| 策略 | 一致性 | 开发、维护成本 |
	
	|-------|-------|----------|
	
	| 算法剔除 | 最差 | 低	 |
	
	| 超时剔除 | 较差 | 较低 |
	
	| 主动淘汰 | 强	  | 较高 |

	| 主动更新 | 强   | 高   |
	

### 最佳实践：
	
	1. 必须要配置超过最大缓存后的淘汰策略，保证系统高可用
	2. 需要把超时剔除和主动更新配合使用，这样有两个好处，一是，主动更新失效，也会保证最终一致性；二是根据区分两种不同策略，可以让不需要一致性实时要求高的缓存 简单实现，开发维护成本降低


### 先操作缓存 先操作数据库？
	
	如果出现不一致，谁先做对业务的影响小，谁就先执行
	所以，最好的方式就是先更新数据库，然后更新缓存，如果缓存更新失败，直接让缓存失效
